<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=no" />
  <title>Usagi Yojimbo — Phaser</title>
  <link rel="stylesheet" href="style.css" />
  <style>
    /* Title overlay */
    #title{position:fixed;inset:0;display:flex;flex-direction:column;align-items:center;justify-content:center;background:#000;color:#fff;z-index:9999;text-align:center}
    #title .hint{opacity:.85;margin:.25rem 0}
    #startBtn{padding:.7rem 1.25rem;border-radius:14px;font-size:1.05rem;background:#16a34a;color:#fff;border:0}

    /* Touch controls (can sit under title until game starts) */
    #touchControls{position:fixed;left:12px;right:12px;bottom:12px;display:flex;justify-content:space-between;gap:12px;z-index:2000}
    #touchControls .ctl{font-size:24px;padding:14px 18px;border-radius:14px}

    /* Status/debug banner (never block taps) */
    #status{position:fixed;left:0;top:0;right:0;z-index:10000;font:12px/1.35 monospace;background:rgba(0,0,0,.75);color:#fff;padding:6px 8px;display:none;white-space:pre-wrap;pointer-events:none}
  </style>
</head>
<body>
  <!-- Title Screen -->
  <div id="title" role="button" tabindex="0" aria-label="Tap to start the game">
    <h1>Usagi Yojimbo</h1>
    <p class="hint">Tap anywhere or press Start</p>
    <button id="startBtn" aria-label="Start Game">Start</button>
  </div>

  <!-- Status / debug -->
  <div id="status"></div>
  <script>
    (function () {
      var box=document.getElementById('status');
      function show(msg){ box.style.display='block'; box.textContent += msg + "\n"; }
      window._status={ show:show };
      window.addEventListener('error',function(e){ show('JS ERROR: ' + (e.message||e.filename)); });
      window.addEventListener('unhandledrejection',function(e){ show('PROMISE REJECTION: ' + e.reason); });
    })();
  </script>

  <!-- Phaser mounts into this container -->
  <div id="game"></div>

  <!-- On-screen controls -->
  <div id="touchControls" aria-hidden="false">
    <div class="left-cluster">
      <button class="ctl" data-key="ArrowLeft"  aria-label="Move Left">◀</button>
      <button class="ctl" data-key="ArrowRight" aria-label="Move Right">▶</button>
    </div>
    <div class="right-cluster">
      <button class="ctl" data-key="Space"      aria-label="Jump">⭡</button>
      <button class="ctl" data-key="KeyA"       aria-label="Attack">⚔</button>
    </div>
  </div>

  <!-- Scripts LAST so DOM exists -->
  <script src="https://cdn.jsdelivr.net/npm/phaser@3.80.0/dist/phaser.min.js"></script>
  <script src="game.js?v=boot4"></script>
</body>
</html>
