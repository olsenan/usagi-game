<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <base href="./" />
  <title>Usagi Arcade Brawler</title>
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div id="ui">
    <div id="title">
      <h1>Usagi Arcade Brawler</h1>
      <button id="btnStart">Start</button>
      <button id="btnEndless">Infinite Challenge</button>
      <p class="credit">Â© You, 2025</p>
    </div>

    <div id="paused" class="hidden">
      <h2>Paused</h2>
      <button id="btnResume">Resume</button>
      <button id="btnQuit">Quit</button>
    </div>

    <div id="hud" class="hidden">
      <div id="health"><span id="hpFill"></span></div>
      <div id="score">Score: <b id="scoreNum">0</b></div>
    </div>
  </div>

  <canvas id="game" width="960" height="540"></canvas>
<script type="module">
  import { bootUI } from "./scripts/ui.js";
  import { startGame, quitGame, setPaused, isRunning } from "./scripts/game.js";

  const init = () => {
    bootUI({
      start:   () => startGame({ mode: "story" }),
      endless: () => startGame({ mode: "endless" }),
      resume:  () => setPaused(false),
      quit:    () => quitGame(),
    });

    // Optional: Esc to pause
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && isRunning()) setPaused(true);
    });
  };

  if (document.readyState === "loading") {
    document.addEventListener("DOMContentLoaded", init, { once: true });
  } else {
    init();
  }
</script>

</body>
</html>
